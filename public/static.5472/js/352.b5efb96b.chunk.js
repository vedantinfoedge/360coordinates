"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[352],{352(e,t,s){s.r(t),s.d(t,{default:()=>m});var a=s(555),i=s(43),n=s(685),r=s(639),d=s(118),l=s(254),o=s(669),c=s(995),p=s(819),h=s(375),x=s(153),u=s(579);const m=()=>{const e=(0,n.Zp)(),[t,s]=(0,i.useState)(null),[m,g]=(0,i.useState)(!0),[v,b]=(0,i.useState)(null),[y,f]=(0,i.useState)([]),[j,N]=(0,i.useState)([]),[S,k]=(0,i.useState)([]),[A,_]=(0,i.useState)("7d");(0,i.useEffect)(()=>{w();const e=setInterval(()=>{w()},3e4);return()=>clearInterval(e)},[A]);const w=async()=>{g(!0),b(null);try{var e,t,a,i,n,p,u,m;const g=new URLSearchParams;"all"!==A&&g.append("date_range",A);const v="".concat(h.Sn.ADMIN_DASHBOARD_STATS).concat(g.toString()?"?"+g.toString():""),b=await(0,x.g)(v),y=[{title:"Total Properties",value:(null===(e=b.total_properties)||void 0===e?void 0:e.toString())||"0",change:"".concat(b.pending_properties||0," pending"),trend:"up",icon:r.A,color:"#3b82f6",path:"/admin/properties"},{title:"Total Users",value:(null===(t=b.total_users)||void 0===t?void 0:t.toString())||"0",change:"".concat((null===(a=b.users_by_type)||void 0===a?void 0:a.buyer)||0," buyers, ").concat((null===(i=b.users_by_type)||void 0===i?void 0:i.seller)||0," sellers"),trend:"up",icon:d.A,color:"#8b5cf6",path:"/admin/users"},{title:"Active Agents",value:(null===(n=b.total_agents)||void 0===n?void 0:n.toString())||"0",change:"".concat(null!==(p=b.total_agents)&&void 0!==p?p:0," total agents"),trend:"up",icon:l.A,color:"#06b6d4",path:"/admin/agents"},{title:"Total Inquiries",value:(null===(u=b.total_inquiries)||void 0===u?void 0:u.toString())||"0",change:"".concat(b.new_inquiries||0," new this week"),trend:"up",icon:o.A,color:"#10b981",path:"/admin/inquiries"},{title:"Active Subscriptions",value:(null===(m=b.active_subscriptions)||void 0===m?void 0:m.toString())||"0",change:"".concat(b.expired_subscriptions||0," expired"),trend:"up",icon:c.A,color:"#8b5cf6",path:"/admin/subscriptions"}];s(y),f(b.property_types_distribution||[]),N(b.recent_properties||[]),k(b.recent_inquiries||[])}catch(v){b(v.message||"Failed to load dashboard data.")}finally{g(!1)}},T=e=>({Apartment:"#3b82f6",House:"#10b981",Villa:"#8b5cf6",Commercial:"#f59e0b",Land:"#06b6d4",Plot:"#ef4444",Office:"#6366f1"}[e]||(e=>{if(!e)return"#64748b";let t=0;for(let n=0;n<e.length;n++)t=e.charCodeAt(n)+((t<<5)-t);const s=Math.abs(t)%360,a=60+Math.abs(t)%20,i=45+Math.abs(t)%15;return"hsl(".concat(s,", ").concat(a,"%, ").concat(i,"%)")})(e)),R=(()=>{if(!y||0===y.length)return null;const e=y.reduce((e,t)=>e+t.count,0);if(0===e)return null;const t=2*Math.PI*80;let s=0;return y.map((i,n)=>{const r=i.count/e*100,d=r/100*t,l=-s;return s+=d,(0,a.A)((0,a.A)({},i),{},{percentage:r.toFixed(1),dashArray:"".concat(d," ").concat(t),dashOffset:l,color:T(i.name)})})})();return m?(0,u.jsxs)("div",{className:"admin-dashboard",children:[(0,u.jsx)("div",{className:"admin-dashboard-header",children:(0,u.jsxs)("div",{children:[(0,u.jsx)("h1",{children:"Dashboard"}),(0,u.jsx)("p",{children:"Loading dashboard data..."})]})}),(0,u.jsx)("div",{className:"admin-stats-grid",children:[1,2,3,4,5,6].map(e=>(0,u.jsxs)("div",{className:"admin-stat-card",style:{opacity:.6},children:[(0,u.jsxs)("div",{className:"admin-stat-header",children:[(0,u.jsx)("div",{className:"admin-stat-title",style:{background:"#e2e8f0",height:"16px",width:"100px",borderRadius:"4px",animation:"pulse 1.5s ease-in-out infinite"}}),(0,u.jsx)("div",{className:"admin-stat-icon",style:{background:"#e2e8f0",animation:"pulse 1.5s ease-in-out infinite"}})]}),(0,u.jsx)("div",{className:"admin-stat-value",style:{background:"#e2e8f0",height:"32px",width:"80px",borderRadius:"4px",animation:"pulse 1.5s ease-in-out infinite"}}),(0,u.jsx)("div",{style:{background:"#e2e8f0",height:"14px",width:"120px",borderRadius:"4px",marginTop:"8px",animation:"pulse 1.5s ease-in-out infinite"}})]},e))}),(0,u.jsx)("style",{children:"\n          @keyframes pulse {\n            0%, 100% { opacity: 1; }\n            50% { opacity: 0.5; }\n          }\n        "})]}):v?(0,u.jsx)("div",{className:"admin-dashboard",children:(0,u.jsxs)("div",{className:"admin-dashboard-header",children:[(0,u.jsx)("h1",{children:"Dashboard"}),(0,u.jsxs)("div",{style:{color:"#ef4444",marginTop:"20px"},children:[(0,u.jsx)(p.A,{size:20,style:{marginRight:"8px",verticalAlign:"middle"}}),v]})]})}):(0,u.jsxs)("div",{className:"admin-dashboard",children:[(0,u.jsxs)("div",{className:"admin-dashboard-header",children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("h1",{children:"Dashboard"}),(0,u.jsxs)("p",{children:["Welcome back! Here's an overview of your platform. ",(0,u.jsx)("span",{style:{fontSize:"12px",color:"#64748b"},children:"(Auto-refreshes every 30s)"})]})]}),(0,u.jsxs)("div",{style:{display:"flex",gap:"10px",alignItems:"center"},children:[(0,u.jsxs)("select",{value:A,onChange:e=>_(e.target.value),style:{padding:"8px 12px",border:"1px solid #e2e8f0",borderRadius:"6px",fontSize:"14px",cursor:"pointer",background:"white"},children:[(0,u.jsx)("option",{value:"7d",children:"Last 7 days"}),(0,u.jsx)("option",{value:"30d",children:"Last 30 days"}),(0,u.jsx)("option",{value:"90d",children:"Last 90 days"}),(0,u.jsx)("option",{value:"all",children:"All time"})]}),(0,u.jsx)("button",{onClick:w,style:{padding:"8px 16px",background:"#3b82f6",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"14px"},disabled:m,children:m?"Refreshing...":"Refresh"})]})]}),t&&(0,u.jsx)("div",{className:"admin-stats-grid",children:t.map((t,s)=>{const a=t.icon,i=null!==t.path;return(0,u.jsx)("div",{className:"admin-stat-card ".concat(i?"admin-stat-card-clickable":""),onClick:()=>{i&&t.path&&e(t.path)},style:{cursor:i?"pointer":"default",transition:"all 0.2s ease"},onMouseEnter:e=>{i&&(e.currentTarget.style.transform="translateY(-2px)",e.currentTarget.style.boxShadow="0 4px 12px rgba(0, 0, 0, 0.1)")},onMouseLeave:e=>{i&&(e.currentTarget.style.transform="translateY(0)",e.currentTarget.style.boxShadow="")},children:(0,u.jsxs)("div",{className:"admin-stat-content",children:[(0,u.jsxs)("div",{className:"admin-stat-header",children:[(0,u.jsx)("span",{className:"admin-stat-title",children:t.title}),(0,u.jsx)("div",{className:"admin-stat-icon",style:{background:"".concat(t.color,"20")},children:(0,u.jsx)(a,{style:{color:t.color}})})]}),(0,u.jsx)("div",{className:"admin-stat-value",children:t.value}),t.change&&(0,u.jsx)("div",{className:"admin-stat-change ".concat(t.trend),children:(0,u.jsx)("span",{children:t.change})}),i&&(0,u.jsx)("div",{style:{marginTop:"8px",fontSize:"12px",color:t.color,fontWeight:"500",opacity:.8},children:"Click to view \u2192"})]})},s)})}),(0,u.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"20px",marginTop:"20px"},children:[(0,u.jsxs)("div",{className:"admin-dashboard-card",children:[(0,u.jsx)("h2",{children:"Recent Properties"}),j.length>0?(0,u.jsx)("div",{style:{marginTop:"15px"},children:j.map((e,t)=>{var s;return(0,u.jsxs)("div",{style:{padding:"12px",borderBottom:t<j.length-1?"1px solid #e2e8f0":"none",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,u.jsxs)("div",{style:{flex:1},children:[(0,u.jsx)("div",{style:{fontWeight:"600",color:"#1e293b",marginBottom:"4px"},children:e.title||"Untitled Property"}),(0,u.jsxs)("div",{style:{fontSize:"12px",color:"#64748b"},children:[e.seller_name||"Unknown"," \u2022 \u20b9",(null===(s=e.price)||void 0===s?void 0:s.toLocaleString("en-IN"))||"0"]})]}),(0,u.jsx)("div",{style:{padding:"4px 8px",borderRadius:"4px",background:e.is_active?"#10b98120":"#f59e0b20",color:e.is_active?"#10b981":"#f59e0b",fontSize:"11px",fontWeight:"500"},children:e.is_active?"Active":"Pending"})]},e.id||t)})}):(0,u.jsx)("p",{style:{textAlign:"center",color:"#64748b",padding:"20px"},children:"No recent properties"})]}),(0,u.jsxs)("div",{className:"admin-dashboard-card",children:[(0,u.jsx)("h2",{children:"Recent Inquiries"}),S.length>0?(0,u.jsx)("div",{style:{marginTop:"15px"},children:S.map((e,t)=>(0,u.jsxs)("div",{style:{padding:"12px",borderBottom:t<S.length-1?"1px solid #e2e8f0":"none",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,u.jsxs)("div",{style:{flex:1},children:[(0,u.jsx)("div",{style:{fontWeight:"600",color:"#1e293b",marginBottom:"4px"},children:e.property_title||"Property Inquiry"}),(0,u.jsx)("div",{style:{fontSize:"12px",color:"#64748b"},children:e.buyer_name||"Unknown Buyer"})]}),(0,u.jsx)("div",{style:{padding:"4px 8px",borderRadius:"4px",background:"pending"===e.status?"#f59e0b20":"#10b98120",color:"pending"===e.status?"#f59e0b":"#10b981",fontSize:"11px",fontWeight:"500"},children:e.status||"Pending"})]},e.id||t))}):(0,u.jsx)("p",{style:{textAlign:"center",color:"#64748b",padding:"20px"},children:"No recent inquiries"})]})]}),R&&R.length>0?(0,u.jsxs)("div",{className:"admin-dashboard-card",style:{marginTop:"20px"},children:[(0,u.jsx)("h2",{children:"Property Types Distribution"}),(0,u.jsxs)("div",{className:"admin-pie-chart-container",children:[(0,u.jsx)("svg",{viewBox:"0 0 200 200",className:"admin-pie-chart",children:R.map((e,t)=>(0,u.jsx)("circle",{cx:"100",cy:"100",r:"80",fill:"none",stroke:e.color,strokeWidth:"40",strokeDasharray:e.dashArray,strokeDashoffset:e.dashOffset,transform:"rotate(-90 100 100)"},t))}),(0,u.jsx)("div",{className:"admin-pie-labels",children:R.map((e,t)=>(0,u.jsxs)("div",{className:"admin-pie-label",children:[(0,u.jsx)("span",{className:"admin-pie-color",style:{background:e.color}}),(0,u.jsxs)("span",{className:"admin-pie-text",children:[e.name," ",e.percentage,"% (",e.count,")"]})]},t))})]})]}):(0,u.jsxs)("div",{className:"admin-dashboard-card",style:{marginTop:"20px"},children:[(0,u.jsx)("h2",{children:"Property Types Distribution"}),(0,u.jsx)("p",{style:{textAlign:"center",color:"#64748b",padding:"40px"},children:"No property data available"})]})]})}}}]);
//# sourceMappingURL=352.b5efb96b.chunk.js.map