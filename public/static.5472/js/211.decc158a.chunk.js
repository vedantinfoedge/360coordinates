/*! For license information please see 211.decc158a.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[211],{211(e,s,a){a.r(s),a.d(s,{default:()=>p});var i=a(555),n=a(43),t=a(292),r=a(580),l=a(995),d=a(375),c=a(153),o=a(579);const p=()=>{const[e,s]=(0,n.useState)(""),[a,p]=(0,n.useState)("All Plans"),[x,h]=(0,n.useState)("All Status"),[u,m]=(0,n.useState)(!1),[g,j]=(0,n.useState)([]),[b,f]=(0,n.useState)(!0),[v,y]=(0,n.useState)(null),[S,N]=(0,n.useState)({page:1,total:0,pages:0}),[A,k]=(0,n.useState)(20);(0,n.useEffect)(()=>{N(e=>(0,i.A)((0,i.A)({},e),{},{page:1}))},[a,x,e,A]),(0,n.useEffect)(()=>{w()},[S.page,A,a,x,e]);const w=async()=>{f(!0),y(null);try{const s=new URLSearchParams({page:S.page.toString(),limit:A.toString()});"All Plans"!==a&&s.append("plan_type",a.toLowerCase()),"All Status"!==x&&s.append("status",x.toLowerCase()),e&&s.append("search",e);const i=await(0,c.g)("".concat(d.Sn.ADMIN_SUBSCRIPTIONS_LIST,"?").concat(s));j(i.subscriptions||[]),N(i.pagination||{page:1,total:0,pages:0})}catch(s){y(s.message||"Failed to load subscriptions")}finally{f(!1)}},P=e=>{if(!e)return"N/A";return new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})},C=e=>({free:"#64748b",basic:"#3b82f6",pro:"#8b5cf6",premium:"#f59e0b"}[e]||"#64748b"),_=e=>e?"#10b981":"#ef4444";return(0,o.jsxs)("div",{className:"admin-subscriptions",children:[(0,o.jsx)("div",{className:"admin-page-header",children:(0,o.jsxs)("div",{children:[(0,o.jsx)("h1",{children:"Subscription Management"}),(0,o.jsx)("p",{children:b?"Loading...":"".concat(g.length," of ").concat(S.total," subscriptions")})]})}),(0,o.jsxs)("div",{className:"admin-filters-bar",children:[(0,o.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[(0,o.jsx)("label",{style:{fontSize:"14px",color:"#64748b"},children:"Items per page:"}),(0,o.jsxs)("select",{value:A,onChange:e=>k(Number(e.target.value)),style:{padding:"6px 12px",border:"1px solid #e2e8f0",borderRadius:"6px",fontSize:"14px",cursor:"pointer"},children:[(0,o.jsx)("option",{value:10,children:"10"}),(0,o.jsx)("option",{value:20,children:"20"}),(0,o.jsx)("option",{value:50,children:"50"}),(0,o.jsx)("option",{value:100,children:"100"})]})]}),(0,o.jsxs)("div",{className:"admin-search-box",children:[(0,o.jsxs)("div",{className:"admin-search-input-wrapper",children:[(0,o.jsx)(t.A,{}),(0,o.jsx)("input",{type:"text",placeholder:"Search by name, email, or phone...",value:e,onChange:e=>s(e.target.value),onKeyPress:e=>{"Enter"===e.key&&w()}})]}),(0,o.jsx)("button",{className:"admin-search-btn",onClick:w,children:"Search"})]}),(0,o.jsxs)("div",{style:{display:"flex",gap:"10px"},children:[(0,o.jsxs)("select",{value:a,onChange:e=>p(e.target.value),style:{padding:"6px 12px",border:"1px solid #e2e8f0",borderRadius:"6px",fontSize:"14px",cursor:"pointer",minWidth:"150px"},children:[(0,o.jsx)("option",{value:"All Plans",children:"All Plans"}),(0,o.jsx)("option",{value:"Free",children:"Free"}),(0,o.jsx)("option",{value:"Basic",children:"Basic"}),(0,o.jsx)("option",{value:"Pro",children:"Pro"}),(0,o.jsx)("option",{value:"Premium",children:"Premium"})]}),(0,o.jsxs)("div",{style:{position:"relative"},children:[(0,o.jsxs)("button",{className:"admin-filter-btn",onClick:()=>m(!u),children:[(0,o.jsx)(r.A,{}),x]}),u&&(0,o.jsx)("div",{className:"admin-filter-dropdown",children:["All Status","Active","Expired"].map(e=>(0,o.jsx)("div",{className:"admin-filter-option ".concat(x===e?"admin-active":""),onClick:()=>{h(e),m(!1)},children:e},e))})]})]})]}),v&&(0,o.jsxs)("div",{style:{background:"#fee2e2",color:"#dc2626",padding:"12px 16px",borderRadius:"6px",marginBottom:"20px",border:"1px solid #fecaca"},children:[(0,o.jsx)("strong",{children:"Error:"})," ",v]}),(0,o.jsx)("div",{className:"admin-subscriptions-table-container",children:b?(0,o.jsxs)("div",{className:"admin-no-results",children:[(0,o.jsx)("h3",{children:"Loading subscriptions..."}),(0,o.jsx)("p",{children:"Please wait while we fetch subscription data..."})]}):v&&0===g.length?(0,o.jsxs)("div",{className:"admin-no-results",children:[(0,o.jsx)("h3",{children:"Unable to Load Subscriptions"}),(0,o.jsx)("p",{children:v}),(0,o.jsx)("button",{onClick:w,style:{marginTop:"15px",padding:"10px 20px",background:"#3b82f6",color:"white",border:"none",borderRadius:"6px",cursor:"pointer"},children:"Retry"})]}):g.length>0?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{style:{marginBottom:"15px",color:"#64748b",fontSize:"14px"},children:["Showing ",g.length," of ",S.total," subscriptions (Page ",S.page," of ",S.pages,")"]}),(0,o.jsxs)("table",{className:"admin-subscriptions-table",children:[(0,o.jsx)("thead",{children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{children:"USER"}),(0,o.jsx)("th",{children:"SUBSCRIPTION PLAN"}),(0,o.jsx)("th",{children:"START DATE"}),(0,o.jsx)("th",{children:"EXPIRY DATE"}),(0,o.jsx)("th",{children:"STATUS"})]})}),(0,o.jsx)("tbody",{children:g.map(e=>{return(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{children:(0,o.jsxs)("div",{className:"admin-subscription-user-cell",children:[(0,o.jsx)("div",{className:"admin-subscription-user-avatar",children:(s=e.user_name,s?s.split(" ").map(e=>e[0]).join("").toUpperCase().substring(0,2):"U")}),(0,o.jsxs)("div",{className:"admin-subscription-user-info",children:[(0,o.jsx)("div",{className:"admin-subscription-user-name",children:e.user_name}),(0,o.jsx)("div",{className:"admin-subscription-user-email",children:e.user_email}),(0,o.jsx)("div",{className:"admin-subscription-user-phone",children:e.user_phone})]})]})}),(0,o.jsx)("td",{children:(0,o.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[(0,o.jsx)(l.A,{size:18,style:{color:C(e.plan_type)}}),(0,o.jsx)("span",{style:{padding:"4px 12px",borderRadius:"4px",background:"".concat(C(e.plan_type),"20"),color:C(e.plan_type),fontSize:"13px",fontWeight:"600",textTransform:"capitalize"},children:e.plan_type})]})}),(0,o.jsx)("td",{className:"admin-subscription-date-cell",children:P(e.start_date)}),(0,o.jsx)("td",{className:"admin-subscription-date-cell",children:e.end_date?P(e.end_date):"No expiry"}),(0,o.jsx)("td",{children:(0,o.jsx)("span",{className:"admin-status-badge",style:{background:"".concat(_(e.is_active),"20"),color:_(e.is_active)},children:e.is_active?"Active":"Expired"})})]},e.id);var s})})]}),S.pages>1&&(0,o.jsxs)("div",{className:"admin-pagination",style:{marginTop:"20px",display:"flex",justifyContent:"center",alignItems:"center",gap:"10px"},children:[(0,o.jsx)("button",{onClick:()=>N(e=>(0,i.A)((0,i.A)({},e),{},{page:Math.max(1,e.page-1)})),disabled:1===S.page,style:{padding:"8px 16px",border:"1px solid #e2e8f0",borderRadius:"6px",background:1===S.page?"#f1f5f9":"white",cursor:1===S.page?"not-allowed":"pointer"},children:"Previous"}),(0,o.jsxs)("span",{style:{padding:"0 10px"},children:["Page ",S.page," of ",S.pages," (",S.total," total subscriptions)"]}),(0,o.jsx)("button",{onClick:()=>N(e=>(0,i.A)((0,i.A)({},e),{},{page:Math.min(e.pages,e.page+1)})),disabled:S.page===S.pages,style:{padding:"8px 16px",border:"1px solid #e2e8f0",borderRadius:"6px",background:S.page===S.pages?"#f1f5f9":"white",cursor:S.page===S.pages?"not-allowed":"pointer"},children:"Next"})]})]}):(0,o.jsxs)("div",{className:"admin-no-results",children:[(0,o.jsx)("h3",{children:"No subscriptions found"}),(0,o.jsx)("p",{children:"Try adjusting your search or filters"})]})})]})}},292(e,s,a){a.d(s,{A:()=>i});const i=(0,a(784).A)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]])}}]);
//# sourceMappingURL=211.decc158a.chunk.js.map