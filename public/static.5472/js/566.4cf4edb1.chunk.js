/*! For license information please see 566.4cf4edb1.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[566],{292(e,a,n){n.d(a,{A:()=>s});const s=(0,n(784).A)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]])},566(e,a,n){n.r(a),n.d(a,{default:()=>o});var s=n(555),t=n(43),i=n(292);const l=(0,n(784).A)("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);var d=n(54),c=n(375),r=n(153),h=n(579);const o=()=>{const[e,a]=(0,t.useState)(""),[n,o]=(0,t.useState)([]),[x,m]=(0,t.useState)(!0),[g,j]=(0,t.useState)(null),[p,u]=(0,t.useState)({page:1,total:0,pages:0}),[v,b]=(0,t.useState)(20);(0,t.useEffect)(()=>{u(e=>(0,s.A)((0,s.A)({},e),{},{page:1}))},[e,v]),(0,t.useEffect)(()=>{y()},[p.page,v,e]);const y=async()=>{m(!0),j(null);try{const a=new URLSearchParams({page:p.page.toString(),limit:v.toString()});e&&a.append("search",e);const n=await(0,r.g)("".concat(c.Sn.ADMIN_AGENTS_LIST,"?").concat(a));o(n.agents||[]),u(n.pagination||{page:1,total:0,pages:0})}catch(a){j(a.message||"Failed to load agents")}finally{m(!1)}};return(0,h.jsxs)("div",{className:"admin-agents",children:[(0,h.jsx)("div",{className:"admin-page-header",children:(0,h.jsxs)("div",{children:[(0,h.jsx)("h1",{children:"Agent / Builder Management"}),(0,h.jsx)("p",{children:x?"Loading...":"".concat(n.length," of ").concat(p.total," agents/builders")})]})}),(0,h.jsxs)("div",{className:"admin-filters-bar",children:[(0,h.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[(0,h.jsx)("label",{style:{fontSize:"14px",color:"#64748b"},children:"Items per page:"}),(0,h.jsxs)("select",{value:v,onChange:e=>b(Number(e.target.value)),style:{padding:"6px 12px",border:"1px solid #e2e8f0",borderRadius:"6px",fontSize:"14px",cursor:"pointer"},children:[(0,h.jsx)("option",{value:10,children:"10"}),(0,h.jsx)("option",{value:20,children:"20"}),(0,h.jsx)("option",{value:50,children:"50"}),(0,h.jsx)("option",{value:100,children:"100"})]})]}),(0,h.jsxs)("div",{className:"admin-search-box",children:[(0,h.jsx)(i.A,{className:"admin-search-icon"}),(0,h.jsx)("input",{type:"text",placeholder:"Search agents...",value:e,onChange:e=>a(e.target.value),onKeyPress:e=>{"Enter"===e.key&&y()}}),(0,h.jsx)("button",{className:"admin-search-btn",onClick:y,children:"Search"})]})]}),(0,h.jsx)("div",{className:"admin-agents-table-container",children:x?(0,h.jsx)("div",{className:"admin-no-results",children:(0,h.jsx)("h3",{children:"Loading agents..."})}):g?(0,h.jsxs)("div",{className:"admin-no-results",children:[(0,h.jsx)("h3",{children:"Error"}),(0,h.jsx)("p",{children:g})]}):n.length>0?(0,h.jsxs)("table",{className:"admin-agents-table",children:[(0,h.jsx)("thead",{children:(0,h.jsxs)("tr",{children:[(0,h.jsx)("th",{children:"AGENT / BUILDER"}),(0,h.jsx)("th",{children:"ROLE"}),(0,h.jsx)("th",{children:"STATUS"}),(0,h.jsx)("th",{children:"INQUIRIES"}),(0,h.jsx)("th",{children:"PROPERTIES"}),(0,h.jsx)("th",{children:"ACTIONS"})]})}),(0,h.jsx)("tbody",{children:n.map(e=>{const a=e.agent_verified||!1;return(0,h.jsxs)("tr",{children:[(0,h.jsx)("td",{"data-label":"Agent",children:(0,h.jsxs)("div",{className:"admin-agent-cell",children:[(0,h.jsx)("div",{className:"admin-agent-avatar",children:(n=e.full_name,n?n.split(" ").map(e=>e[0]).join("").toUpperCase().substring(0,2):"A")}),(0,h.jsxs)("div",{children:[(0,h.jsx)("div",{className:"admin-agent-name",children:e.full_name||"N/A"}),(0,h.jsx)("div",{className:"admin-agent-email",children:e.email})]})]})}),(0,h.jsx)("td",{"data-label":"Role",children:(0,h.jsx)("span",{style:{padding:"4px 8px",borderRadius:"4px",background:"#06b6d420",color:"#06b6d4",fontSize:"12px",fontWeight:"500",textTransform:"capitalize"},children:"agent"===e.user_type?"Agent":"Builder"})}),(0,h.jsx)("td",{"data-label":"Status",children:(0,h.jsx)("span",{className:"admin-status-badge ".concat(a?"admin-verified":"admin-pending"),children:a?"Verified":"Pending"})}),(0,h.jsx)("td",{"data-label":"Inquiries",children:(0,h.jsx)("div",{className:"admin-leads-badge",children:e.leads_count||0})}),(0,h.jsx)("td",{"data-label":"Properties",children:(0,h.jsx)("div",{className:"admin-leads-badge",children:e.property_count||0})}),(0,h.jsx)("td",{"data-label":"Actions",className:"admin-actions-cell",children:(0,h.jsx)("div",{className:"admin-actions-wrapper",children:a?(0,h.jsxs)("button",{className:"admin-agent-action-btn admin-agent-unverify-btn",title:"Unverify Agent",onClick:()=>(async e=>{try{await(0,r.g)("".concat(c.Sn.ADMIN_AGENTS_UNVERIFY,"?id=").concat(e),{method:"POST"}),y()}catch(a){alert(a.message||"Failed to unverify agent")}})(e.id),children:[(0,h.jsx)(l,{size:18}),(0,h.jsx)("span",{children:"Unverify"})]}):(0,h.jsxs)("button",{className:"admin-agent-action-btn admin-agent-verify-btn",title:"Verify Agent",onClick:()=>(async e=>{try{await(0,r.g)("".concat(c.Sn.ADMIN_AGENTS_VERIFY,"?id=").concat(e),{method:"POST"}),y()}catch(a){alert(a.message||"Failed to verify agent")}})(e.id),children:[(0,h.jsx)(d.A,{size:18}),(0,h.jsx)("span",{children:"Verify"})]})})})]},e.id);var n})})]}):(0,h.jsxs)("div",{className:"admin-no-results",children:[(0,h.jsx)("h3",{children:"No agents found"}),(0,h.jsx)("p",{children:"Try adjusting your search"})]})})]})}}}]);
//# sourceMappingURL=566.4cf4edb1.chunk.js.map