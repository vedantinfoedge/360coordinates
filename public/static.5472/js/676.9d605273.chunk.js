/*! For license information please see 676.9d605273.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[676],{292(e,i,s){s.d(i,{A:()=>n});const n=(0,s(784).A)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]])},676(e,i,s){s.r(i),s.d(i,{default:()=>c});var n=s(555),a=s(43),r=s(292),t=s(669),l=s(375),d=s(153),o=s(579);const c=()=>{const[e,i]=(0,a.useState)(""),[s,c]=(0,a.useState)(""),[p,x]=(0,a.useState)(""),[h,u]=(0,a.useState)([]),[m,g]=(0,a.useState)({properties:[],agents_builders:[]}),[j,y]=(0,a.useState)(!0),[b,f]=(0,a.useState)(null),[v,N]=(0,a.useState)({page:1,total:0,pages:0}),[S,_]=(0,a.useState)(20),[q,w]=(0,a.useState)(null),[A,k]=(0,a.useState)(!1);(0,a.useEffect)(()=>{N(e=>(0,n.A)((0,n.A)({},e),{},{page:1}))},[s,p,e,S]),(0,a.useEffect)(()=>{I()},[v.page,S,s,p,e]);const I=async()=>{y(!0),f(null);try{const i=new URLSearchParams({page:v.page.toString(),limit:S.toString()});s&&i.append("property_id",s),p&&i.append("agent_builder_id",p),e&&i.append("search",e);const n=await(0,d.g)("".concat(l.Sn.ADMIN_INQUIRIES_LIST,"?").concat(i));u(n.inquiries||[]),N(n.pagination||{page:1,total:0,pages:0}),n.filter_options&&g(n.filter_options)}catch(i){f(i.message||"Failed to load inquiries")}finally{y(!1)}},R=e=>{if(!e)return"N/A";return new Date(e).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})},C=e=>({new:"#3b82f6",contacted:"#8b5cf6",viewed:"#06b6d4",interested:"#10b981",not_interested:"#f59e0b",closed:"#64748b"}[e]||"#64748b");return(0,o.jsxs)("div",{className:"admin-inquiries",children:[(0,o.jsx)("div",{className:"admin-page-header",children:(0,o.jsxs)("div",{children:[(0,o.jsx)("h1",{children:"Inquiry Management"}),(0,o.jsx)("p",{children:j?"Loading...":"".concat(h.length," of ").concat(v.total," inquiries")})]})}),(0,o.jsxs)("div",{className:"admin-filters-bar",children:[(0,o.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[(0,o.jsx)("label",{style:{fontSize:"14px",color:"#64748b"},children:"Items per page:"}),(0,o.jsxs)("select",{value:S,onChange:e=>_(Number(e.target.value)),style:{padding:"6px 12px",border:"1px solid #e2e8f0",borderRadius:"6px",fontSize:"14px",cursor:"pointer"},children:[(0,o.jsx)("option",{value:10,children:"10"}),(0,o.jsx)("option",{value:20,children:"20"}),(0,o.jsx)("option",{value:50,children:"50"}),(0,o.jsx)("option",{value:100,children:"100"})]})]}),(0,o.jsxs)("div",{className:"admin-search-box",children:[(0,o.jsxs)("div",{className:"admin-search-input-wrapper",children:[(0,o.jsx)(r.A,{}),(0,o.jsx)("input",{type:"text",placeholder:"Search by name, email, mobile, or property...",value:e,onChange:e=>i(e.target.value),onKeyPress:e=>{"Enter"===e.key&&I()}})]}),(0,o.jsx)("button",{className:"admin-search-btn",onClick:I,children:"Search"})]}),(0,o.jsxs)("div",{style:{display:"flex",gap:"10px",flexWrap:"wrap"},children:[(0,o.jsxs)("select",{value:s,onChange:e=>c(e.target.value),style:{padding:"6px 12px",border:"1px solid #e2e8f0",borderRadius:"6px",fontSize:"14px",cursor:"pointer",minWidth:"200px"},children:[(0,o.jsx)("option",{value:"",children:"All Properties"}),m.properties.map(e=>(0,o.jsx)("option",{value:e.id,children:e.title},e.id))]}),(0,o.jsxs)("select",{value:p,onChange:e=>x(e.target.value),style:{padding:"6px 12px",border:"1px solid #e2e8f0",borderRadius:"6px",fontSize:"14px",cursor:"pointer",minWidth:"200px"},children:[(0,o.jsx)("option",{value:"",children:"All Agents/Builders"}),m.agents_builders.map(e=>(0,o.jsxs)("option",{value:e.id,children:[e.full_name," (","agent"===e.user_type?"Agent":"Builder",")"]},e.id))]})]})]}),b&&(0,o.jsxs)("div",{style:{background:"#fee2e2",color:"#dc2626",padding:"12px 16px",borderRadius:"6px",marginBottom:"20px",border:"1px solid #fecaca"},children:[(0,o.jsx)("strong",{children:"Error:"})," ",b]}),(0,o.jsx)("div",{className:"admin-inquiries-table-container",children:j?(0,o.jsxs)("div",{className:"admin-no-results",children:[(0,o.jsx)("h3",{children:"Loading inquiries..."}),(0,o.jsx)("p",{children:"Please wait while we fetch inquiry data..."})]}):b&&0===h.length?(0,o.jsxs)("div",{className:"admin-no-results",children:[(0,o.jsx)("h3",{children:"Unable to Load Inquiries"}),(0,o.jsx)("p",{children:b}),(0,o.jsx)("button",{onClick:I,style:{marginTop:"15px",padding:"10px 20px",background:"#3b82f6",color:"white",border:"none",borderRadius:"6px",cursor:"pointer"},children:"Retry"})]}):h.length>0?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{style:{marginBottom:"15px",color:"#64748b",fontSize:"14px"},children:["Showing ",h.length," of ",v.total," inquiries (Page ",v.page," of ",v.pages,")"]}),(0,o.jsxs)("table",{className:"admin-inquiries-table",children:[(0,o.jsx)("thead",{children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{children:"INQUIRY ID"}),(0,o.jsx)("th",{children:"USER"}),(0,o.jsx)("th",{children:"PROPERTY"}),(0,o.jsx)("th",{children:"OWNER (Agent/Builder)"}),(0,o.jsx)("th",{children:"DATE & TIME"}),(0,o.jsx)("th",{children:"STATUS"}),(0,o.jsx)("th",{children:"ACTIONS"})]})}),(0,o.jsx)("tbody",{children:h.map(e=>{return(0,o.jsxs)("tr",{children:[(0,o.jsxs)("td",{children:["#",e.id]}),(0,o.jsx)("td",{children:(0,o.jsxs)("div",{className:"admin-inquiry-user-cell",children:[(0,o.jsx)("div",{className:"admin-inquiry-user-name",children:e.buyer_name}),(0,o.jsx)("div",{className:"admin-inquiry-user-details",children:e.buyer_mobile}),(0,o.jsx)("div",{className:"admin-inquiry-user-email",children:e.buyer_email})]})}),(0,o.jsx)("td",{children:(0,o.jsxs)("div",{className:"admin-inquiry-property-cell",children:[(0,o.jsx)("div",{className:"admin-inquiry-property-title",children:e.property_title}),(0,o.jsxs)("div",{className:"admin-inquiry-property-details",children:[e.property_location," \u2022 ",(i=e.property_price,i?new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(i):"N/A")]}),(0,o.jsxs)("div",{style:{fontSize:"11px",color:"#64748b"},children:["Property ID: #",e.property_id]})]})}),(0,o.jsx)("td",{children:(0,o.jsxs)("div",{className:"admin-inquiry-owner-cell",children:[(0,o.jsx)("div",{className:"admin-inquiry-owner-name",children:e.seller_name}),(0,o.jsx)("div",{style:{fontSize:"11px",color:"#06b6d4",marginTop:"2px"},children:"agent"===e.seller_type?"Agent":"Builder"}),(0,o.jsx)("div",{className:"admin-inquiry-owner-email",children:e.seller_phone})]})}),(0,o.jsx)("td",{className:"admin-inquiry-date-cell",children:R(e.created_at)}),(0,o.jsx)("td",{children:(0,o.jsx)("span",{className:"admin-status-badge",style:{background:"".concat(C(e.status),"20"),color:C(e.status),textTransform:"capitalize"},children:e.status.replace("_"," ")})}),(0,o.jsx)("td",{className:"admin-actions-column",children:(0,o.jsx)("button",{className:"admin-icon-btn admin-info",title:"View Message",onClick:()=>(e=>{w(e),k(!0)})(e),children:(0,o.jsx)(t.A,{})})})]},e.id);var i})})]}),v.pages>1&&(0,o.jsxs)("div",{className:"admin-pagination",style:{marginTop:"20px",display:"flex",justifyContent:"center",alignItems:"center",gap:"10px"},children:[(0,o.jsx)("button",{onClick:()=>N(e=>(0,n.A)((0,n.A)({},e),{},{page:Math.max(1,e.page-1)})),disabled:1===v.page,style:{padding:"8px 16px",border:"1px solid #e2e8f0",borderRadius:"6px",background:1===v.page?"#f1f5f9":"white",cursor:1===v.page?"not-allowed":"pointer"},children:"Previous"}),(0,o.jsxs)("span",{style:{padding:"0 10px"},children:["Page ",v.page," of ",v.pages," (",v.total," total inquiries)"]}),(0,o.jsx)("button",{onClick:()=>N(e=>(0,n.A)((0,n.A)({},e),{},{page:Math.min(e.pages,e.page+1)})),disabled:v.page===v.pages,style:{padding:"8px 16px",border:"1px solid #e2e8f0",borderRadius:"6px",background:v.page===v.pages?"#f1f5f9":"white",cursor:v.page===v.pages?"not-allowed":"pointer"},children:"Next"})]})]}):(0,o.jsxs)("div",{className:"admin-no-results",children:[(0,o.jsx)("h3",{children:"No inquiries found"}),(0,o.jsx)("p",{children:"Try adjusting your search or filters"})]})}),A&&q&&(0,o.jsx)("div",{className:"admin-modal-overlay",onClick:()=>k(!1),children:(0,o.jsxs)("div",{className:"admin-modal-content",onClick:e=>e.stopPropagation(),children:[(0,o.jsxs)("div",{className:"admin-modal-header",children:[(0,o.jsx)("h2",{children:"Inquiry Message"}),(0,o.jsx)("button",{className:"admin-modal-close",onClick:()=>k(!1),children:"\xd7"})]}),(0,o.jsxs)("div",{className:"admin-modal-body",children:[(0,o.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,o.jsx)("strong",{children:"From:"})," ",q.buyer_name," (",q.buyer_email,")"]}),(0,o.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,o.jsx)("strong",{children:"Property:"})," ",q.property_title]}),(0,o.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,o.jsx)("strong",{children:"Message:"}),(0,o.jsx)("div",{style:{marginTop:"10px",padding:"15px",background:"#f8fafc",borderRadius:"6px",whiteSpace:"pre-wrap",lineHeight:"1.6"},children:q.message||"No message provided"})]}),(0,o.jsxs)("div",{style:{fontSize:"12px",color:"#64748b"},children:[(0,o.jsx)("strong",{children:"Inquiry Date:"})," ",R(q.created_at)]})]})]})})]})}}}]);
//# sourceMappingURL=676.9d605273.chunk.js.map