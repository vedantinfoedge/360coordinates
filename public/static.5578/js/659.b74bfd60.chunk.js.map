{"version":3,"file":"static/js/659.b74bfd60.chunk.js","mappings":"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","sources":["Admin/Pages/AdminLeads.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { API_ENDPOINTS } from '../../config/api.config';\r\nimport { adminFetch } from '../utils/adminFetch';\r\nimport '../style/AdminUsers.css';\r\n\r\nconst AdminLeads = () => {\r\n  const [leads, setLeads] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const [pagination, setPagination] = useState({ page: 1, total: 0, total_pages: 0 });\r\n  const [pageSize, setPageSize] = useState(20);\r\n\r\n  useEffect(() => {\r\n    setPagination(prev => ({ ...prev, page: 1 }));\r\n  }, [pageSize]);\r\n\r\n  useEffect(() => {\r\n    fetchLeads();\r\n  }, [pagination.page, pageSize]);\r\n\r\n  const fetchLeads = async () => {\r\n    setLoading(true);\r\n    setError(null);\r\n    try {\r\n      const params = new URLSearchParams({\r\n        page: pagination.page.toString(),\r\n        limit: pageSize.toString(),\r\n      });\r\n      const data = await adminFetch(`${API_ENDPOINTS.ADMIN_LEADS_LIST}?${params}`);\r\n      setLeads(Array.isArray(data?.leads) ? data.leads : []);\r\n      setPagination(data?.pagination || { page: 1, total: 0, total_pages: 0 });\r\n    } catch (err) {\r\n      setError(err.message || 'Failed to load leads');\r\n      setLeads([]);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const formatDate = (dateString) => {\r\n    if (!dateString) return 'N/A';\r\n    const date = new Date(dateString);\r\n    return date.toLocaleString('en-US', {\r\n      year: 'numeric',\r\n      month: 'short',\r\n      day: 'numeric',\r\n      hour: '2-digit',\r\n      minute: '2-digit',\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div className=\"admin-users\">\r\n      <div className=\"admin-page-header\">\r\n        <div>\r\n          <h1>Leads</h1>\r\n          <p>\r\n            {loading ? 'Loading...' : `${leads.length} of ${pagination.total} leads`}\r\n          </p>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"admin-filters-bar\">\r\n        <div style={{ display: 'flex', alignItems: 'center', gap: '10px' }}>\r\n          <label style={{ fontSize: '14px', color: '#64748b' }}>Items per page:</label>\r\n          <select\r\n            value={pageSize}\r\n            onChange={(e) => setPageSize(Number(e.target.value))}\r\n            style={{\r\n              padding: '6px 12px',\r\n              border: '1px solid #e2e8f0',\r\n              borderRadius: '6px',\r\n              fontSize: '14px',\r\n              cursor: 'pointer',\r\n            }}\r\n          >\r\n            <option value={10}>10</option>\r\n            <option value={20}>20</option>\r\n            <option value={50}>50</option>\r\n            <option value={100}>100</option>\r\n          </select>\r\n        </div>\r\n      </div>\r\n\r\n      {error && (\r\n        <div\r\n          style={{\r\n            background: '#fee2e2',\r\n            color: '#dc2626',\r\n            padding: '12px 16px',\r\n            borderRadius: '6px',\r\n            marginBottom: '20px',\r\n            border: '1px solid #fecaca',\r\n          }}\r\n        >\r\n          <strong>Error:</strong> {error}\r\n          <button\r\n            onClick={fetchLeads}\r\n            style={{\r\n              marginLeft: '12px',\r\n              padding: '4px 12px',\r\n              background: '#dc2626',\r\n              color: 'white',\r\n              border: 'none',\r\n              borderRadius: '4px',\r\n              cursor: 'pointer',\r\n            }}\r\n          >\r\n            Retry\r\n          </button>\r\n        </div>\r\n      )}\r\n\r\n      <div className=\"admin-users-table-container\">\r\n        {loading ? (\r\n          <div className=\"admin-no-results\">\r\n            <h3>Loading leads...</h3>\r\n            <p>Please wait while we fetch lead data...</p>\r\n          </div>\r\n        ) : error && leads.length === 0 ? (\r\n          <div className=\"admin-no-results\">\r\n            <h3>Unable to load leads</h3>\r\n            <p>{error}</p>\r\n            <button\r\n              onClick={fetchLeads}\r\n              style={{\r\n                marginTop: '15px',\r\n                padding: '10px 20px',\r\n                background: '#3b82f6',\r\n                color: 'white',\r\n                border: 'none',\r\n                borderRadius: '6px',\r\n                cursor: 'pointer',\r\n              }}\r\n            >\r\n              Retry\r\n            </button>\r\n          </div>\r\n        ) : leads.length > 0 ? (\r\n          <>\r\n            <div\r\n              style={{\r\n                marginBottom: '15px',\r\n                color: '#64748b',\r\n                fontSize: '14px',\r\n              }}\r\n            >\r\n              Showing {leads.length} of {pagination.total} leads (Page{' '}\r\n              {pagination.page} of {pagination.total_pages})\r\n            </div>\r\n            <table className=\"admin-users-table\">\r\n              <thead>\r\n                <tr>\r\n                  <th>PROPERTY</th>\r\n                  <th>BUYER</th>\r\n                  <th>PHONE</th>\r\n                  <th>EMAIL</th>\r\n                  <th>DATE</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {leads.map((lead) => (\r\n                  <tr key={lead.id || `${lead.buyer_id}-${lead.property_id}`}>\r\n                    <td>\r\n                      <div className=\"admin-user-cell\">\r\n                        <div className=\"admin-user-info\">\r\n                          <div className=\"admin-user-name\">\r\n                            {lead.property_title || 'Property'}\r\n                          </div>\r\n                          <div className=\"admin-user-email\" style={{ fontSize: '12px', color: '#64748b' }}>\r\n                            ID #{lead.property_id}\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    </td>\r\n                    <td>\r\n                      <div className=\"admin-user-name\">{lead.buyer_name || 'Buyer'}</div>\r\n                    </td>\r\n                    <td className=\"admin-phone-cell\">{lead.buyer_phone || '—'}</td>\r\n                    <td>\r\n                      <a href={`mailto:${lead.buyer_email}`} style={{ color: '#3b82f6' }}>\r\n                        {lead.buyer_email || '—'}\r\n                      </a>\r\n                    </td>\r\n                    <td className=\"admin-joined-cell\">{formatDate(lead.created_at)}</td>\r\n                  </tr>\r\n                ))}\r\n              </tbody>\r\n            </table>\r\n            {pagination.total_pages > 1 && (\r\n              <div\r\n                style={{\r\n                  marginTop: '20px',\r\n                  display: 'flex',\r\n                  justifyContent: 'space-between',\r\n                  alignItems: 'center',\r\n                  flexWrap: 'wrap',\r\n                  gap: '10px',\r\n                }}\r\n              >\r\n                <span style={{ fontSize: '14px', color: '#64748b' }}>\r\n                  Page {pagination.page} of {pagination.total_pages} ({pagination.total} total leads)\r\n                </span>\r\n                <div style={{ display: 'flex', gap: '8px' }}>\r\n                  <button\r\n                    className=\"admin-search-btn\"\r\n                    disabled={pagination.page <= 1}\r\n                    onClick={() =>\r\n                      setPagination((prev) => ({ ...prev, page: prev.page - 1 }))\r\n                    }\r\n                  >\r\n                    Previous\r\n                  </button>\r\n                  <button\r\n                    className=\"admin-search-btn\"\r\n                    disabled={pagination.page >= pagination.total_pages}\r\n                    onClick={() =>\r\n                      setPagination((prev) => ({ ...prev, page: prev.page + 1 }))\r\n                    }\r\n                  >\r\n                    Next\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            )}\r\n          </>\r\n        ) : (\r\n          <div className=\"admin-no-results\">\r\n            <h3>No leads found</h3>\r\n            <p>Leads are created when buyers click &quot;View Contact&quot; on a property.</p>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AdminLeads;\r\n"],"names":["AdminLeads","leads","setLeads","useState","loading","setLoading","error","setError","pagination","setPagination","page","total","total_pages","pageSize","setPageSize","useEffect","prev","_objectSpread","fetchLeads","async","params","URLSearchParams","toString","limit","data","adminFetch","concat","API_ENDPOINTS","ADMIN_LEADS_LIST","Array","isArray","err","message","formatDate","dateString","Date","toLocaleString","year","month","day","hour","minute","_jsxs","className","children","_jsx","length","style","display","alignItems","gap","fontSize","color","value","onChange","e","Number","target","padding","border","borderRadius","cursor","background","marginBottom","onClick","marginLeft","marginTop","_Fragment","map","lead","property_title","property_id","buyer_name","buyer_phone","href","buyer_email","created_at","id","buyer_id","justifyContent","flexWrap","disabled"],"ignoreList":[],"sourceRoot":""}