{"version":3,"file":"static/js/842.3df4cb5b.chunk.js","mappings":"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","sources":["Admin/Pages/AdminAuditLogs.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { API_ENDPOINTS } from '../../config/api.config';\r\nimport { adminFetch } from '../utils/adminFetch';\r\nimport '../style/AdminUsers.css';\r\n\r\nconst AdminAuditLogs = () => {\r\n  const [logs, setLogs] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const [pagination, setPagination] = useState({ page: 1, total: 0, total_pages: 0 });\r\n  const [pageSize, setPageSize] = useState(20);\r\n\r\n  useEffect(() => {\r\n    setPagination(prev => ({ ...prev, page: 1 }));\r\n  }, [pageSize]);\r\n\r\n  useEffect(() => {\r\n    fetchLogs();\r\n  }, [pagination.page, pageSize]);\r\n\r\n  const fetchLogs = async () => {\r\n    setLoading(true);\r\n    setError(null);\r\n    try {\r\n      const params = new URLSearchParams({\r\n        page: pagination.page.toString(),\r\n        limit: pageSize.toString(),\r\n      });\r\n      const data = await adminFetch(`${API_ENDPOINTS.ADMIN_AUDIT_LOGS_LIST}?${params}`);\r\n      setLogs(Array.isArray(data?.logs) ? data.logs : []);\r\n      setPagination(data?.pagination || { page: 1, total: 0, total_pages: 0 });\r\n    } catch (err) {\r\n      setError(err.message || 'Failed to load audit logs');\r\n      setLogs([]);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const formatDate = (dateString) => {\r\n    if (!dateString) return 'N/A';\r\n    const date = new Date(dateString);\r\n    return date.toLocaleString('en-US', {\r\n      year: 'numeric',\r\n      month: 'short',\r\n      day: 'numeric',\r\n      hour: '2-digit',\r\n      minute: '2-digit',\r\n      second: '2-digit',\r\n    });\r\n  };\r\n\r\n  const getActionLabel = (actionType) => {\r\n    const labels = {\r\n      approve_property: 'Approved property',\r\n      reject_property: 'Rejected property',\r\n      delete_property: 'Deleted property',\r\n    };\r\n    return labels[actionType] || actionType;\r\n  };\r\n\r\n  const getActionColor = (actionType) => {\r\n    if (actionType === 'approve_property') return '#10b981';\r\n    if (actionType === 'reject_property') return '#f59e0b';\r\n    if (actionType === 'delete_property') return '#ef4444';\r\n    return '#64748b';\r\n  };\r\n\r\n  return (\r\n    <div className=\"admin-users\">\r\n      <div className=\"admin-page-header\">\r\n        <div>\r\n          <h1>Audit Logs</h1>\r\n          <p>\r\n            {loading ? 'Loading...' : `${logs.length} of ${pagination.total} log entries`}\r\n          </p>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"admin-filters-bar\">\r\n        <div style={{ display: 'flex', alignItems: 'center', gap: '10px' }}>\r\n          <label style={{ fontSize: '14px', color: '#64748b' }}>Items per page:</label>\r\n          <select\r\n            value={pageSize}\r\n            onChange={(e) => setPageSize(Number(e.target.value))}\r\n            style={{\r\n              padding: '6px 12px',\r\n              border: '1px solid #e2e8f0',\r\n              borderRadius: '6px',\r\n              fontSize: '14px',\r\n              cursor: 'pointer',\r\n            }}\r\n          >\r\n            <option value={10}>10</option>\r\n            <option value={20}>20</option>\r\n            <option value={50}>50</option>\r\n            <option value={100}>100</option>\r\n          </select>\r\n        </div>\r\n      </div>\r\n\r\n      {error && (\r\n        <div\r\n          style={{\r\n            background: '#fee2e2',\r\n            color: '#dc2626',\r\n            padding: '12px 16px',\r\n            borderRadius: '6px',\r\n            marginBottom: '20px',\r\n            border: '1px solid #fecaca',\r\n          }}\r\n        >\r\n          <strong>Error:</strong> {error}\r\n          <button\r\n            onClick={fetchLogs}\r\n            style={{\r\n              marginLeft: '12px',\r\n              padding: '4px 12px',\r\n              background: '#dc2626',\r\n              color: 'white',\r\n              border: 'none',\r\n              borderRadius: '4px',\r\n              cursor: 'pointer',\r\n            }}\r\n          >\r\n            Retry\r\n          </button>\r\n        </div>\r\n      )}\r\n\r\n      <div className=\"admin-users-table-container\">\r\n        {loading ? (\r\n          <div className=\"admin-no-results\">\r\n            <h3>Loading audit logs...</h3>\r\n          </div>\r\n        ) : error && logs.length === 0 ? (\r\n          <div className=\"admin-no-results\">\r\n            <h3>Unable to load audit logs</h3>\r\n            <p>{error}</p>\r\n            <button\r\n              onClick={fetchLogs}\r\n              style={{\r\n                marginTop: '15px',\r\n                padding: '10px 20px',\r\n                background: '#3b82f6',\r\n                color: 'white',\r\n                border: 'none',\r\n                borderRadius: '6px',\r\n                cursor: 'pointer',\r\n              }}\r\n            >\r\n              Retry\r\n            </button>\r\n          </div>\r\n        ) : logs.length > 0 ? (\r\n          <>\r\n            <div style={{ marginBottom: '15px', color: '#64748b', fontSize: '14px' }}>\r\n              Showing {logs.length} of {pagination.total} entries (Page {pagination.page} of {pagination.total_pages})\r\n            </div>\r\n            <table className=\"admin-users-table\">\r\n              <thead>\r\n                <tr>\r\n                  <th>ADMIN</th>\r\n                  <th>ACTION</th>\r\n                  <th>PROPERTY ID</th>\r\n                  <th>DETAILS</th>\r\n                  <th>IP</th>\r\n                  <th>DATE</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {logs.map((log) => (\r\n                  <tr key={log.id}>\r\n                    <td>\r\n                      <div className=\"admin-user-name\">{log.admin_name || 'Admin'}</div>\r\n                    </td>\r\n                    <td>\r\n                      <span\r\n                        style={{\r\n                          padding: '4px 8px',\r\n                          borderRadius: '4px',\r\n                          background: `${getActionColor(log.action_type)}20`,\r\n                          color: getActionColor(log.action_type),\r\n                          fontSize: '12px',\r\n                          fontWeight: '500',\r\n                        }}\r\n                      >\r\n                        {getActionLabel(log.action_type)}\r\n                      </span>\r\n                    </td>\r\n                    <td>{log.property_id != null ? `#${log.property_id}` : '—'}</td>\r\n                    <td style={{ maxWidth: '200px', overflow: 'hidden', textOverflow: 'ellipsis' }}>\r\n                      {log.details || '—'}\r\n                    </td>\r\n                    <td style={{ fontSize: '12px', color: '#64748b' }}>{log.ip_address || '—'}</td>\r\n                    <td className=\"admin-joined-cell\">{formatDate(log.created_at)}</td>\r\n                  </tr>\r\n                ))}\r\n              </tbody>\r\n            </table>\r\n            {pagination.total_pages > 1 && (\r\n              <div\r\n                style={{\r\n                  marginTop: '20px',\r\n                  display: 'flex',\r\n                  justifyContent: 'space-between',\r\n                  alignItems: 'center',\r\n                  flexWrap: 'wrap',\r\n                  gap: '10px',\r\n                }}\r\n              >\r\n                <span style={{ fontSize: '14px', color: '#64748b' }}>\r\n                  Page {pagination.page} of {pagination.total_pages} ({pagination.total} total)\r\n                </span>\r\n                <div style={{ display: 'flex', gap: '8px' }}>\r\n                  <button\r\n                    className=\"admin-search-btn\"\r\n                    disabled={pagination.page <= 1}\r\n                    onClick={() => setPagination((prev) => ({ ...prev, page: prev.page - 1 }))}\r\n                  >\r\n                    Previous\r\n                  </button>\r\n                  <button\r\n                    className=\"admin-search-btn\"\r\n                    disabled={pagination.page >= pagination.total_pages}\r\n                    onClick={() => setPagination((prev) => ({ ...prev, page: prev.page + 1 }))}\r\n                  >\r\n                    Next\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            )}\r\n          </>\r\n        ) : (\r\n          <div className=\"admin-no-results\">\r\n            <h3>No audit logs yet</h3>\r\n            <p>Logs are recorded when admins approve, reject, or delete properties.</p>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AdminAuditLogs;\r\n"],"names":["AdminAuditLogs","logs","setLogs","useState","loading","setLoading","error","setError","pagination","setPagination","page","total","total_pages","pageSize","setPageSize","useEffect","prev","_objectSpread","fetchLogs","async","params","URLSearchParams","toString","limit","data","adminFetch","concat","API_ENDPOINTS","ADMIN_AUDIT_LOGS_LIST","Array","isArray","err","message","formatDate","dateString","Date","toLocaleString","year","month","day","hour","minute","second","getActionColor","actionType","_jsxs","className","children","_jsx","length","style","display","alignItems","gap","fontSize","color","value","onChange","e","Number","target","padding","border","borderRadius","cursor","background","marginBottom","onClick","marginLeft","marginTop","_Fragment","map","log","admin_name","action_type","fontWeight","approve_property","reject_property","delete_property","property_id","maxWidth","overflow","textOverflow","details","ip_address","created_at","id","justifyContent","flexWrap","disabled"],"ignoreList":[],"sourceRoot":""}