"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[842],{602(){},842(e,t,r){r.r(t),r.d(t,{default:()=>d});var s=r(555),a=r(43),n=r(375),i=r(153),l=(r(602),r(579));const d=()=>{const[e,t]=(0,a.useState)([]),[r,d]=(0,a.useState)(!0),[o,c]=(0,a.useState)(null),[p,x]=(0,a.useState)({page:1,total:0,total_pages:0}),[h,g]=(0,a.useState)(20);(0,a.useEffect)(()=>{x(e=>(0,s.A)((0,s.A)({},e),{},{page:1}))},[h]),(0,a.useEffect)(()=>{u()},[p.page,h]);const u=async()=>{d(!0),c(null);try{const e=new URLSearchParams({page:p.page.toString(),limit:h.toString()}),r=await(0,i.g)("".concat(n.Sn.ADMIN_AUDIT_LOGS_LIST,"?").concat(e));t(Array.isArray(null===r||void 0===r?void 0:r.logs)?r.logs:[]),x((null===r||void 0===r?void 0:r.pagination)||{page:1,total:0,total_pages:0})}catch(e){c(e.message||"Failed to load audit logs"),t([])}finally{d(!1)}},j=e=>{if(!e)return"N/A";return new Date(e).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"})},m=e=>"approve_property"===e?"#10b981":"reject_property"===e?"#f59e0b":"delete_property"===e?"#ef4444":"#64748b";return(0,l.jsxs)("div",{className:"admin-users",children:[(0,l.jsx)("div",{className:"admin-page-header",children:(0,l.jsxs)("div",{children:[(0,l.jsx)("h1",{children:"Audit Logs"}),(0,l.jsx)("p",{children:r?"Loading...":"".concat(e.length," of ").concat(p.total," log entries")})]})}),(0,l.jsx)("div",{className:"admin-filters-bar",children:(0,l.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[(0,l.jsx)("label",{style:{fontSize:"14px",color:"#64748b"},children:"Items per page:"}),(0,l.jsxs)("select",{value:h,onChange:e=>g(Number(e.target.value)),style:{padding:"6px 12px",border:"1px solid #e2e8f0",borderRadius:"6px",fontSize:"14px",cursor:"pointer"},children:[(0,l.jsx)("option",{value:10,children:"10"}),(0,l.jsx)("option",{value:20,children:"20"}),(0,l.jsx)("option",{value:50,children:"50"}),(0,l.jsx)("option",{value:100,children:"100"})]})]})}),o&&(0,l.jsxs)("div",{style:{background:"#fee2e2",color:"#dc2626",padding:"12px 16px",borderRadius:"6px",marginBottom:"20px",border:"1px solid #fecaca"},children:[(0,l.jsx)("strong",{children:"Error:"})," ",o,(0,l.jsx)("button",{onClick:u,style:{marginLeft:"12px",padding:"4px 12px",background:"#dc2626",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Retry"})]}),(0,l.jsx)("div",{className:"admin-users-table-container",children:r?(0,l.jsx)("div",{className:"admin-no-results",children:(0,l.jsx)("h3",{children:"Loading audit logs..."})}):o&&0===e.length?(0,l.jsxs)("div",{className:"admin-no-results",children:[(0,l.jsx)("h3",{children:"Unable to load audit logs"}),(0,l.jsx)("p",{children:o}),(0,l.jsx)("button",{onClick:u,style:{marginTop:"15px",padding:"10px 20px",background:"#3b82f6",color:"white",border:"none",borderRadius:"6px",cursor:"pointer"},children:"Retry"})]}):e.length>0?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{style:{marginBottom:"15px",color:"#64748b",fontSize:"14px"},children:["Showing ",e.length," of ",p.total," entries (Page ",p.page," of ",p.total_pages,")"]}),(0,l.jsxs)("table",{className:"admin-users-table",children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{children:"ADMIN"}),(0,l.jsx)("th",{children:"ACTION"}),(0,l.jsx)("th",{children:"PROPERTY ID"}),(0,l.jsx)("th",{children:"DETAILS"}),(0,l.jsx)("th",{children:"IP"}),(0,l.jsx)("th",{children:"DATE"})]})}),(0,l.jsx)("tbody",{children:e.map(e=>{return(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{children:(0,l.jsx)("div",{className:"admin-user-name",children:e.admin_name||"Admin"})}),(0,l.jsx)("td",{children:(0,l.jsx)("span",{style:{padding:"4px 8px",borderRadius:"4px",background:"".concat(m(e.action_type),"20"),color:m(e.action_type),fontSize:"12px",fontWeight:"500"},children:(t=e.action_type,{approve_property:"Approved property",reject_property:"Rejected property",delete_property:"Deleted property"}[t]||t)})}),(0,l.jsx)("td",{children:null!=e.property_id?"#".concat(e.property_id):"\u2014"}),(0,l.jsx)("td",{style:{maxWidth:"200px",overflow:"hidden",textOverflow:"ellipsis"},children:e.details||"\u2014"}),(0,l.jsx)("td",{style:{fontSize:"12px",color:"#64748b"},children:e.ip_address||"\u2014"}),(0,l.jsx)("td",{className:"admin-joined-cell",children:j(e.created_at)})]},e.id);var t})})]}),p.total_pages>1&&(0,l.jsxs)("div",{style:{marginTop:"20px",display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:"10px"},children:[(0,l.jsxs)("span",{style:{fontSize:"14px",color:"#64748b"},children:["Page ",p.page," of ",p.total_pages," (",p.total," total)"]}),(0,l.jsxs)("div",{style:{display:"flex",gap:"8px"},children:[(0,l.jsx)("button",{className:"admin-search-btn",disabled:p.page<=1,onClick:()=>x(e=>(0,s.A)((0,s.A)({},e),{},{page:e.page-1})),children:"Previous"}),(0,l.jsx)("button",{className:"admin-search-btn",disabled:p.page>=p.total_pages,onClick:()=>x(e=>(0,s.A)((0,s.A)({},e),{},{page:e.page+1})),children:"Next"})]})]})]}):(0,l.jsxs)("div",{className:"admin-no-results",children:[(0,l.jsx)("h3",{children:"No audit logs yet"}),(0,l.jsx)("p",{children:"Logs are recorded when admins approve, reject, or delete properties."})]})})]})}}}]);
//# sourceMappingURL=842.3df4cb5b.chunk.js.map