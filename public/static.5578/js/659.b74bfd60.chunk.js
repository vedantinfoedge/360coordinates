"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[659],{602(){},659(e,a,s){s.r(a),s.d(a,{default:()=>d});var n=s(555),l=s(43),r=s(375),i=s(153),t=(s(602),s(579));const d=()=>{const[e,a]=(0,l.useState)([]),[s,d]=(0,l.useState)(!0),[c,o]=(0,l.useState)(null),[p,h]=(0,l.useState)({page:1,total:0,total_pages:0}),[x,u]=(0,l.useState)(20);(0,l.useEffect)(()=>{h(e=>(0,n.A)((0,n.A)({},e),{},{page:1}))},[x]),(0,l.useEffect)(()=>{m()},[p.page,x]);const m=async()=>{d(!0),o(null);try{const e=new URLSearchParams({page:p.page.toString(),limit:x.toString()}),s=await(0,i.g)("".concat(r.Sn.ADMIN_LEADS_LIST,"?").concat(e));a(Array.isArray(null===s||void 0===s?void 0:s.leads)?s.leads:[]),h((null===s||void 0===s?void 0:s.pagination)||{page:1,total:0,total_pages:0})}catch(e){o(e.message||"Failed to load leads"),a([])}finally{d(!1)}},g=e=>{if(!e)return"N/A";return new Date(e).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})};return(0,t.jsxs)("div",{className:"admin-users",children:[(0,t.jsx)("div",{className:"admin-page-header",children:(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{children:"Leads"}),(0,t.jsx)("p",{children:s?"Loading...":"".concat(e.length," of ").concat(p.total," leads")})]})}),(0,t.jsx)("div",{className:"admin-filters-bar",children:(0,t.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[(0,t.jsx)("label",{style:{fontSize:"14px",color:"#64748b"},children:"Items per page:"}),(0,t.jsxs)("select",{value:x,onChange:e=>u(Number(e.target.value)),style:{padding:"6px 12px",border:"1px solid #e2e8f0",borderRadius:"6px",fontSize:"14px",cursor:"pointer"},children:[(0,t.jsx)("option",{value:10,children:"10"}),(0,t.jsx)("option",{value:20,children:"20"}),(0,t.jsx)("option",{value:50,children:"50"}),(0,t.jsx)("option",{value:100,children:"100"})]})]})}),c&&(0,t.jsxs)("div",{style:{background:"#fee2e2",color:"#dc2626",padding:"12px 16px",borderRadius:"6px",marginBottom:"20px",border:"1px solid #fecaca"},children:[(0,t.jsx)("strong",{children:"Error:"})," ",c,(0,t.jsx)("button",{onClick:m,style:{marginLeft:"12px",padding:"4px 12px",background:"#dc2626",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Retry"})]}),(0,t.jsx)("div",{className:"admin-users-table-container",children:s?(0,t.jsxs)("div",{className:"admin-no-results",children:[(0,t.jsx)("h3",{children:"Loading leads..."}),(0,t.jsx)("p",{children:"Please wait while we fetch lead data..."})]}):c&&0===e.length?(0,t.jsxs)("div",{className:"admin-no-results",children:[(0,t.jsx)("h3",{children:"Unable to load leads"}),(0,t.jsx)("p",{children:c}),(0,t.jsx)("button",{onClick:m,style:{marginTop:"15px",padding:"10px 20px",background:"#3b82f6",color:"white",border:"none",borderRadius:"6px",cursor:"pointer"},children:"Retry"})]}):e.length>0?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{style:{marginBottom:"15px",color:"#64748b",fontSize:"14px"},children:["Showing ",e.length," of ",p.total," leads (Page"," ",p.page," of ",p.total_pages,")"]}),(0,t.jsxs)("table",{className:"admin-users-table",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{children:"PROPERTY"}),(0,t.jsx)("th",{children:"BUYER"}),(0,t.jsx)("th",{children:"PHONE"}),(0,t.jsx)("th",{children:"EMAIL"}),(0,t.jsx)("th",{children:"DATE"})]})}),(0,t.jsx)("tbody",{children:e.map(e=>(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{children:(0,t.jsx)("div",{className:"admin-user-cell",children:(0,t.jsxs)("div",{className:"admin-user-info",children:[(0,t.jsx)("div",{className:"admin-user-name",children:e.property_title||"Property"}),(0,t.jsxs)("div",{className:"admin-user-email",style:{fontSize:"12px",color:"#64748b"},children:["ID #",e.property_id]})]})})}),(0,t.jsx)("td",{children:(0,t.jsx)("div",{className:"admin-user-name",children:e.buyer_name||"Buyer"})}),(0,t.jsx)("td",{className:"admin-phone-cell",children:e.buyer_phone||"\u2014"}),(0,t.jsx)("td",{children:(0,t.jsx)("a",{href:"mailto:".concat(e.buyer_email),style:{color:"#3b82f6"},children:e.buyer_email||"\u2014"})}),(0,t.jsx)("td",{className:"admin-joined-cell",children:g(e.created_at)})]},e.id||"".concat(e.buyer_id,"-").concat(e.property_id)))})]}),p.total_pages>1&&(0,t.jsxs)("div",{style:{marginTop:"20px",display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:"10px"},children:[(0,t.jsxs)("span",{style:{fontSize:"14px",color:"#64748b"},children:["Page ",p.page," of ",p.total_pages," (",p.total," total leads)"]}),(0,t.jsxs)("div",{style:{display:"flex",gap:"8px"},children:[(0,t.jsx)("button",{className:"admin-search-btn",disabled:p.page<=1,onClick:()=>h(e=>(0,n.A)((0,n.A)({},e),{},{page:e.page-1})),children:"Previous"}),(0,t.jsx)("button",{className:"admin-search-btn",disabled:p.page>=p.total_pages,onClick:()=>h(e=>(0,n.A)((0,n.A)({},e),{},{page:e.page+1})),children:"Next"})]})]})]}):(0,t.jsxs)("div",{className:"admin-no-results",children:[(0,t.jsx)("h3",{children:"No leads found"}),(0,t.jsx)("p",{children:'Leads are created when buyers click "View Contact" on a property.'})]})})]})}}}]);
//# sourceMappingURL=659.b74bfd60.chunk.js.map