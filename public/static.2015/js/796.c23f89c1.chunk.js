/*! For license information please see 796.c23f89c1.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[796],{292(e,t,s){s.d(t,{A:()=>a});const a=(0,s(784).A)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]])},796(e,t,s){s.r(t),s.d(t,{default:()=>v});var a=s(555),i=s(43),n=s(292),r=s(580),l=s(87),d=s(784);const c=(0,d.A)("heart",[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]]),o=(0,d.A)("star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]),p=(0,d.A)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);var h=s(614),x=s(855),j=s(375),m=s(153),u=s(295),y=s(579);const v=()=>{const[e,t]=(0,i.useState)(""),[s,d]=(0,i.useState)("All Status"),[v,g]=(0,i.useState)(""),[b,f]=(0,i.useState)(""),[S,N]=(0,i.useState)(""),[A,E]=(0,i.useState)(""),[I,P]=(0,i.useState)(!1),[R,k]=(0,i.useState)([]),[_,C]=(0,i.useState)({cities:[],property_types:[]}),[T,w]=(0,i.useState)(!0),[M,O]=(0,i.useState)(null),[L,z]=(0,i.useState)({page:1,total:0,pages:0}),[D,F]=(0,i.useState)(20),[W,V]=(0,i.useState)(!1),[U,J]=(0,i.useState)(null);(0,i.useEffect)(()=>{z(e=>(0,a.A)((0,a.A)({},e),{},{page:1}))},[s,e,v,b,S,A,D]),(0,i.useEffect)(()=>{Y()},[L.page,D,s,e,v,b,S,A]);const Y=async()=>{w(!0),O(null);try{const t=new URLSearchParams({page:L.page.toString(),limit:D.toString()});"All Status"!==s&&("Approved"===s?t.append("status","approved"):"Pending"===s?t.append("status","pending"):"Sold"===s&&t.append("status","sold")),v&&t.append("city",v),b&&t.append("property_type",b),S&&t.append("min_price",S),A&&t.append("max_price",A),e&&t.append("search",e);const a=await(0,m.g)("".concat(j.Sn.ADMIN_PROPERTIES_LIST,"?").concat(t));k(Array.isArray(null===a||void 0===a?void 0:a.properties)?a.properties:[]),z((null===a||void 0===a?void 0:a.pagination)||{page:1,total:0,pages:0}),null!==a&&void 0!==a&&a.filter_options&&C(a.filter_options)}catch(t){O(t.message||"Failed to load properties"),k([])}finally{w(!1)}},G=e=>e?"#10b981":"#f59e0b",H=e=>e?"Approved":"Pending";return(0,y.jsxs)("div",{className:"admin-properties",children:[(0,y.jsx)("div",{className:"admin-page-header",children:(0,y.jsxs)("div",{children:[(0,y.jsx)("h1",{children:"Manage Properties"}),(0,y.jsx)("p",{children:T?"Loading...":"".concat(R.length," of ").concat(L.total," properties")})]})}),(0,y.jsxs)("div",{className:"admin-filters-bar",children:[(0,y.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[(0,y.jsx)("label",{style:{fontSize:"14px",color:"#64748b"},children:"Items per page:"}),(0,y.jsxs)("select",{value:D,onChange:e=>F(Number(e.target.value)),style:{padding:"6px 12px",border:"1px solid #e2e8f0",borderRadius:"6px",fontSize:"14px",cursor:"pointer"},children:[(0,y.jsx)("option",{value:10,children:"10"}),(0,y.jsx)("option",{value:20,children:"20"}),(0,y.jsx)("option",{value:50,children:"50"}),(0,y.jsx)("option",{value:100,children:"100"})]})]}),(0,y.jsxs)("div",{className:"admin-search-box",children:[(0,y.jsxs)("div",{className:"admin-search-input-wrapper",children:[(0,y.jsx)(n.A,{}),(0,y.jsx)("input",{type:"text",placeholder:"Search by name, location, or type...",value:e,onChange:e=>t(e.target.value),onKeyPress:e=>{"Enter"===e.key&&Y()}})]}),(0,y.jsx)("button",{className:"admin-search-btn",onClick:Y,children:"Search"})]}),(0,y.jsxs)("div",{style:{display:"flex",gap:"10px",flexWrap:"wrap",alignItems:"center"},children:[(0,y.jsxs)("div",{style:{position:"relative"},children:[(0,y.jsxs)("button",{className:"admin-filter-btn",onClick:()=>P(!I),children:[(0,y.jsx)(r.A,{}),s]}),I&&(0,y.jsx)("div",{className:"admin-filter-dropdown",children:["All Status","Approved","Pending","Sold"].map(e=>(0,y.jsx)("div",{className:"admin-filter-option ".concat(s===e?"admin-active":""),onClick:()=>{d(e),P(!1)},children:e},e))})]}),(0,y.jsxs)("select",{value:v,onChange:e=>g(e.target.value),style:{padding:"6px 12px",border:"1px solid #e2e8f0",borderRadius:"6px",fontSize:"14px",cursor:"pointer",minWidth:"150px"},children:[(0,y.jsx)("option",{value:"",children:"All Cities"}),_.cities.map(e=>(0,y.jsx)("option",{value:e,children:e},e))]}),(0,y.jsxs)("select",{value:b,onChange:e=>f(e.target.value),style:{padding:"6px 12px",border:"1px solid #e2e8f0",borderRadius:"6px",fontSize:"14px",cursor:"pointer",minWidth:"150px"},children:[(0,y.jsx)("option",{value:"",children:"All Types"}),_.property_types.map(e=>(0,y.jsx)("option",{value:e,children:e},e))]}),(0,y.jsxs)("div",{style:{display:"flex",gap:"5px",alignItems:"center"},children:[(0,y.jsx)("input",{type:"number",placeholder:"Min Price",value:S,onChange:e=>N(e.target.value),style:{padding:"6px 12px",border:"1px solid #e2e8f0",borderRadius:"6px",fontSize:"14px",width:"120px"}}),(0,y.jsx)("span",{style:{color:"#64748b"},children:"to"}),(0,y.jsx)("input",{type:"number",placeholder:"Max Price",value:A,onChange:e=>E(e.target.value),style:{padding:"6px 12px",border:"1px solid #e2e8f0",borderRadius:"6px",fontSize:"14px",width:"120px"}})]})]})]}),(0,y.jsx)("div",{className:"admin-properties-table-container",children:T?(0,y.jsx)("div",{className:"admin-no-results",children:(0,y.jsx)("h3",{children:"Loading properties..."})}):M?(0,y.jsxs)("div",{className:"admin-no-results",children:[(0,y.jsx)("h3",{children:"Error"}),(0,y.jsx)("p",{children:M})]}):R.length>0?(0,y.jsxs)("table",{className:"admin-properties-table",children:[(0,y.jsx)("thead",{children:(0,y.jsxs)("tr",{children:[(0,y.jsx)("th",{children:"ID"}),(0,y.jsx)("th",{children:"PROPERTY"}),(0,y.jsx)("th",{children:"TYPE"}),(0,y.jsx)("th",{children:"LISTING"}),(0,y.jsx)("th",{children:"PRICE"}),(0,y.jsx)("th",{children:"VIEWS"}),(0,y.jsx)("th",{children:"INTEREST"}),(0,y.jsx)("th",{children:"FAVORITES"}),(0,y.jsx)("th",{children:"STATUS"}),(0,y.jsx)("th",{children:"ACTIONS"})]})}),(0,y.jsx)("tbody",{children:R.map(e=>{var t;const s=e.is_active||!1;return(0,y.jsxs)("tr",{children:[(0,y.jsxs)("td",{children:["#",e.id]}),(0,y.jsx)("td",{children:(0,y.jsxs)("div",{className:"admin-property-cell",children:[(0,y.jsx)("div",{className:"admin-property-icon",children:e.cover_image?(0,y.jsx)("img",{src:e.cover_image,alt:""}):(0,y.jsx)("div",{style:{width:"40px",height:"40px",background:"#e5e7eb",borderRadius:"4px"}})}),(0,y.jsxs)("div",{children:[(0,y.jsx)("div",{className:"admin-property-name",children:e.title||"Untitled Property"}),(0,y.jsx)("div",{className:"admin-property-location",children:e.location||"N/A"})]})]})}),(0,y.jsx)("td",{children:e.property_type||"N/A"}),(0,y.jsx)("td",{children:(0,y.jsx)("span",{className:"admin-listing-badge ".concat((null===(t=e.status)||void 0===t?void 0:t.toLowerCase())||"sale"),children:"rent"===e.status?"Rent":"Sale"})}),(0,y.jsx)("td",{className:"admin-price-cell",children:(a=e.price,a?new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(a):"N/A")}),(0,y.jsx)("td",{children:(0,y.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[(0,y.jsx)(l.A,{size:16,style:{color:"#64748b"}}),(0,y.jsx)("span",{style:{fontWeight:"500",color:"#1e293b"},children:e.views_count||0})]})}),(0,y.jsx)("td",{children:(0,y.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[(0,y.jsx)(c,{size:16,style:{color:"#f59e0b",fill:"#f59e0b"}}),(0,y.jsx)("span",{style:{fontWeight:"500",color:"#1e293b"},children:e.interest_count||0})]})}),(0,y.jsx)("td",{children:(0,y.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[(0,y.jsx)(o,{size:16,style:{color:"#eab308",fill:"#eab308"}}),(0,y.jsx)("span",{style:{fontWeight:"500",color:"#1e293b"},children:e.favorites_count||0})]})}),(0,y.jsx)("td",{children:(0,y.jsx)("span",{className:"admin-status-badge",style:{background:"".concat(G(s),"20"),color:G(s)},children:H(s)})}),(0,y.jsx)("td",{className:"admin-actions-column",children:(0,y.jsxs)("div",{className:"admin-action-buttons",children:[(0,y.jsx)("button",{className:"admin-properties-icon-btn",title:"View",children:(0,y.jsx)(l.A,{})}),!s&&(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("button",{className:"admin-properties-icon-btn admin-approve-btn",title:"Approve",onClick:()=>(async e=>{try{await(0,m.g)("".concat(j.Sn.ADMIN_PROPERTIES_APPROVE,"?id=").concat(e),{method:"POST"}),Y()}catch(t){alert(t.message||"Failed to approve property")}})(e.id),children:(0,y.jsx)(p,{})}),(0,y.jsx)("button",{className:"admin-properties-icon-btn admin-reject-btn",title:"Reject",onClick:()=>(async e=>{const t=window.prompt("Enter rejection reason (optional):");if(null!==t)try{await(0,m.g)("".concat(j.Sn.ADMIN_PROPERTIES_REJECT,"?id=").concat(e),{method:"POST",body:JSON.stringify({reason:t||"Property rejected by admin"})}),Y()}catch(s){alert(s.message||"Failed to reject property")}})(e.id),children:(0,y.jsx)(h.A,{})})]}),(0,y.jsx)("button",{className:"admin-properties-icon-btn admin-danger",title:"Delete",onClick:()=>{return t=e.id,J(t),void V(!0);var t},children:(0,y.jsx)(x.A,{})})]})})]},e.id);var a})})]}):(0,y.jsxs)("div",{className:"admin-no-results",children:[(0,y.jsx)("h3",{children:"No properties found"}),(0,y.jsx)("p",{children:"Try adjusting your search or filters"})]})}),(0,y.jsx)(u.A,{isOpen:W,onClose:()=>{V(!1),J(null)},onConfirm:async()=>{if(U)try{await(0,m.g)("".concat(j.Sn.ADMIN_PROPERTIES_DELETE,"?id=").concat(U),{method:"DELETE"}),Y(),J(null),V(!1)}catch(e){alert(e.message||"Failed to delete property")}}})]})}},855(e,t,s){s.d(t,{A:()=>a});const a=(0,s(784).A)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]])}}]);
//# sourceMappingURL=796.c23f89c1.chunk.js.map